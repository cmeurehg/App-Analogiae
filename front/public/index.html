<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
  <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.0.0/journal/bootstrap.min.css" />
  <title>Test App-Analogiae Page</title>
</head>

<body>
    <h2>Concept Categories</h2>
        <br><br>
    
        <button id="findAllCat">Find Categories</button>
        <button id="findAll">Find Instances</button>

    <h3>Enter a Concept Family o Category</h3>

    <form action="/api/category/createCat" method="POST">
      <input type="text" name="Category"placeholder="Category">
      <input type="text" name="title" placeholder="title">
      <input type="submit">
    </form>
        
        <br><br>
    
    <h3>Enter a Concept Use</h3>

    <!-- <form action="/api/instance/create" method="POST">
        <input type="text" name="instance"placeholder="instance">
        <input type="text" name="author" placeholder="author">
        <input type="text" name="code"placeholder="code">
        <input type="text" name="affinities" placeholder="affinities">
        <input type="text" name="function"placeholder="function">
        <input type="text" name="languageGame" placeholder="language game">
        <input type="submit">
    </form> -->

    <div>
        <form class="formSubmission">
            <input type="text" name="instance"placeholder="instance">
            <input type="text" name="author" placeholder="author">
            <input type="text" name="code"placeholder="code">
            <input type="text" name="affinities" placeholder="affinities">
            <input type="text" name="function"placeholder="function">
            <input type="text" name="languageGame" placeholder="language game">
            <!-- <input type="submit"> -->
        </form>
        <button id='formSubmit'> Submitttt </button>
    </div>

        
        <br><br>
   
    <a href="/categories">Categories</a><br><br>
    <a href="/instances">Instances</a><br><br>

    <h3>Search a Concept Family or Category</h3>

    <form action="/submit" method="get">
      <input type="text" name="Category"placeholder="Category">
      <input type="submit">
    </form>
        <br>

        <h3>Search concept uses by affinity</h3>

        <form action="/submit" method="get">
          <input type="text" name="enter-instance"placeholder="Enter Instance">
          <input type="text" name="affinity"placeholder="affinity">
          <input type="submit">
        </form>
        <br><br>
        
        <h3>Generate Graph</h3>
        <input type="submit" name="Generate Network">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
        <script>
            
            $(document).ready(function(){
                $("#findAll").on("click", function(){
                    $.get("/api/instance/findAll", function(data){
                        console.log(data);
                    })
                });
            });

            $(document).ready(function(){
                $("#findAllCat").on("click", function(){
                    $.get("/api/category/findAllCat", function(data){
                        console.log(data);
                    })
                });
            });

            $(document).ready(function(){
                $('#formSubmit').on('click', function(e){
                    e.preventDefault()
                    var form = Array.from(document.querySelectorAll('.formSubmission input'))
                    var affinities = form[3].value
                    var affinityValues = affinities.split(',')

                    var affinityMongoObject = {
                        instance: form[0].value,
                        author: form[1].value,
                        code: form[2].value,
                        affinities: affinityValues,
                        function: form[4].value,
                        languageGame: form[5].value
                    }

                    $.ajax({
                        method: 'POST',
                        url: '/api/instance/create',
                        data: affinityMongoObject
                    }).done(function(msg){
                        alert("Data has been sent: " + msg)
                    })


                })
            })

            
        </script>
</body>

</html>
